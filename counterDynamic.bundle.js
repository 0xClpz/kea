webpackJsonp([2],{1031:function(e,n,t){var r=t(577);"string"==typeof r&&(r=[[e.i,r,""]]);t(36)(r,{});r.locals&&(e.exports=r.locals)},1032:function(e,n,t){var r=t(578);"string"==typeof r&&(r=[[e.i,r,""]]);t(36)(r,{});r.locals&&(e.exports=r.locals)},1047:function(e,n,t){e.exports=t(362)},230:function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function a(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}var c=t(1032),u=(t.n(c),t(3)),l=t.n(u),i=t(21),s=(t.n(i),t(90)),m=(t.n(s),t(138)),p=t.n(m),d=t(146),f=(t.n(d),t(371));t.d(n,"a",function(){return E});var y,h,b=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),k={full:t(808),keyPath:t(809),reducers:t(810)},E=(y=t.i(i.kea)({}),y(h=function(e){function n(){var e,a,c,u;r(this,n);for(var l=arguments.length,i=Array(l),m=0;m<l;m++)i[m]=arguments[m];return a=c=o(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(i))),c.handleRoute=function(e){var n=c.props.dispatch,r=e.target.attributes.href.value;e.preventDefault(),n(t.i(s.push)(r)),window.scrollTo(0,0)},u=a,o(c,u)}return a(n,e),b(n,[{key:"render",value:function(){return l.a.createElement("div",{className:"counter-dynamic-scene"},l.a.createElement("div",{className:"description"},l.a.createElement("h2",null,"Example #2 - Dynamic Counter"),"This example demonstrates dynamically created actions and reducers.",l.a.createElement("br",null),l.a.createElement("br",null),"Dynamically in this context means ",l.a.createElement("em",null,"on mount"),". In short, this allows you to create multiple instances of the component with separate state.",l.a.createElement("div",{className:"demo"},l.a.createElement(f.a,{id:1}),l.a.createElement("br",null),l.a.createElement(f.a,{id:2})),l.a.createElement("h2",null,"1. Key and path"),"The code for this example is almost the same as for the ",l.a.createElement("a",{href:"/counter-singleton",onClick:this.handleRoute},"singleton counter"),".",l.a.createElement("br",null),l.a.createElement("br",null),"The big difference is that we must manually tell our component instances where to store their data:",l.a.createElement(p.a,{className:"javascript"},k.keyPath),"The ",l.a.createElement("code",null,"key")," function receives your component's props as input and must return a key that's unique for the life of the component. Usually it's something like ",l.a.createElement("code",null,"key = (props) => props.id")," if your component is rendered as ",l.a.createElement("code",null,"<Component id='somethingUnique' />"),l.a.createElement("br",null),l.a.createElement("br",null),"The ",l.a.createElement("code",null,"path")," specifies where the data for your component lives in redux. It takes just one argument, the ",l.a.createElement("code",null,"key")," from the previous step.",l.a.createElement("br",null),l.a.createElement("br",null),"Note! You may also use ",l.a.createElement("code",null,"path")," with singleton components (like the ",l.a.createElement("a",{href:"/counter-singleton",onClick:this.handleRoute},"previous example"),") if you wish to specify where they will store their data.",l.a.createElement("br",null),l.a.createElement("br",null),"It makes your redux tree more readable and helps with debugging. In that case you must skip the ",l.a.createElement("code",null,"key")," line.",l.a.createElement("h2",null,"2. Limiting the reducers"),"There's one last thing you need to do.",l.a.createElement("br",null),l.a.createElement("br",null),"No matter which instance of your component triggers the action, all the reducers will receive it. So if counter #1 dispatches the ",l.a.createElement("code",null,"increment")," action, counter #2 will also receive it.",l.a.createElement("br",null),l.a.createElement("br",null),"In order to prevent this, you must check for the key in your reducers, like so:",l.a.createElement(p.a,{className:"javascript"},k.reducers),"And we're done!"),l.a.createElement("div",{className:"description"},l.a.createElement("h2",null,"Final Example"),"While the following counters have separate data, they are still connected to the counters on top of this page, as they share the same ",l.a.createElement("code",null,"id"),"s. You can mix and match!",l.a.createElement("div",{className:"demo"},l.a.createElement(f.a,{id:1}),l.a.createElement("br",null),l.a.createElement(f.a,{id:2})),"Next, check out the ",l.a.createElement("a",{href:"/sliders",onClick:this.handleRoute},"sliders")," demo to see how to add side effects to your code.",l.a.createElement("h2",null,"Full source"),l.a.createElement(p.a,{className:"javascript"},k.full),l.a.createElement("a",{href:"/sliders",onClick:this.handleRoute},"Next demo")))}}]),n}(u.Component))||h)},362:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(24),o=(t.n(r),t(230));n.default=t.i(r.createScene)({name:"counter-dynamic",component:o.a})},371:function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function a(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var u=t(1031),l=(t.n(u),t(3)),i=t.n(l),s=t(21);t.n(s);t.d(n,"a",function(){return f});var m,p,d=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),f=(m=t.i(s.kea)({key:function(e){return e.id},path:function(e){return["scenes","counterDynamic","counter",e]},actions:function(){return{increment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{amount:e}},decrement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{amount:e}}}},reducers:function(e){var n,t=e.actions,r=e.key;e.props;return{counter:[0,l.PropTypes.number,(n={},c(n,t.increment,function(e,n){return n.key===r?e+n.amount:e}),c(n,t.decrement,function(e,n){return n.key===r?e-n.amount:e}),n)]}},selectors:function(e){var n=e.selectors;return{doubleCounter:[function(){return[n.counter]},function(e){return 2*e},l.PropTypes.number]}}}),m(p=function(e){function n(){return r(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),d(n,[{key:"render",value:function(){var e=this.props,n=e.counter,t=e.doubleCounter,r=this.actions,o=r.increment,a=r.decrement;return i.a.createElement("div",{className:"kea-counter"},"Count: ",n,i.a.createElement("br",null),"Doublecount: ",t,i.a.createElement("br",null),i.a.createElement("button",{onClick:function(){return o(1)}},"Increment"),i.a.createElement("button",{onClick:function(){return a(1)}},"Decrement"))}}]),n}(l.Component))||p)},381:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(24),o=(t.n(r),t(230));n.default=t.i(r.createScene)({name:"counter-dynamic",component:o.a})},577:function(e,n,t){n=e.exports=t(33)(),n.push([e.i,"",""])},578:function(e,n,t){n=e.exports=t(33)(),n.push([e.i,".counter-dynamic-scene {\n  // text-align: center;\n}\n",""])},808:function(e,n){e.exports="// counter/index.js\nimport React, { Component, PropTypes } from 'react'\nimport { kea } from 'kea'\n\n@kea({\n  key: (props) => props.id,\n  path: (key) => ['scenes', 'counterDynamic', 'counter', key],\n\n  actions: () => ({\n    increment: (amount = 1) => ({ amount }),\n    decrement: (amount = 1) => ({ amount })\n  }),\n\n  reducers: ({ actions, key, props }) => ({\n    counter: [0, PropTypes.number, {\n      [actions.increment]: (state, payload) => payload.key === key ? state + payload.amount : state,\n      [actions.decrement]: (state, payload) => payload.key === key ? state - payload.amount : state\n    }]\n  }),\n\n  selectors: ({ selectors }) => ({\n    doubleCounter: [\n      () => [selectors.counter],\n      (counter) => counter * 2,\n      PropTypes.number\n    ]\n  })\n})\nexport default class Counter extends Component {\n  render () {\n    const { counter, doubleCounter } = this.props\n    const { increment, decrement } = this.actions\n\n    return (\n      <div className='kea-counter'>\n        Count: {counter}\n        <br />\n        Doublecount: {doubleCounter}\n        <br />\n        <button onClick={() => increment(1)}>Increment</button>\n        <button onClick={() => decrement(1)}>Decrement</button>\n      </div>\n    )\n  }\n}\n\n// index.js\nexport default class CounterDynamicScene extends Component {\n  render () {\n    return (\n      <div>\n        <Counter id={1} />\n        <Counter id={2} />\n      </div>\n    )\n  }\n}\n"},809:function(e,n){e.exports="import React, { Component, PropTypes } from 'react'\nimport { kea } from 'kea'\n\n@kea({\n  key: (props) => props.id,\n\n  path: (key) => ['scenes', 'counterDynamic', 'counter', key],\n\n  // ...\n})\nexport default class Counter extends Component {\n  // ...\n}\n"},810:function(e,n){e.exports="@kea({\n  key: (props) => props.id,\n  path: (key) => ['scenes', 'counterDynamic', 'counter', key],\n\n  actions: () => ({\n    increment: (amount = 1) => ({ amount }),\n    decrement: (amount = 1) => ({ amount })\n  }),\n\n  reducers: ({ actions, key, props }) => ({\n    counter: [0, PropTypes.number, {\n      [actions.increment]: (state, payload) => payload.key === key ? state + payload.amount : state,\n      [actions.decrement]: (state, payload) => payload.key === key ? state - payload.amount : state\n    }]\n  }),\n\n  // selectors: ...\n})\n"}},[1047]);