webpackJsonp([0],{1027:function(e,n,t){var o=t(576);"string"==typeof o&&(o=[[e.i,o,""]]);t(36)(o,{});o.locals&&(e.exports=o.locals)},1028:function(e,n,t){var o=t(577);"string"==typeof o&&(o=[[e.i,o,""]]);t(36)(o,{});o.locals&&(e.exports=o.locals)},1043:function(e,n,t){e.exports=t(360)},227:function(e,n,t){"use strict";function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function r(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var s=t(1028),l=(t.n(s),t(4)),u=t.n(l),i=t(34),m=(t.n(i),t(90)),d=(t.n(m),t(138)),p=t.n(d),h=t(146),f=(t.n(h),t(369));t.d(n,"a",function(){return k});var b,y,E=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),g=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},v={full:t(812),import:t(813),actions:t(810),actions2:t(808),actions3:t(809),reducers:t(815),selectors:t(817),selectors2:t(816),noDecorators:t(814),todoReducer:t(818),component:t(811)},k=(b=t.i(i.kea)({actions:function(){return{toggleFeature:function(e){return{feature:e}}}},reducers:function(e){var n=e.actions;return{features:[{},l.PropTypes.object,c({},n.toggleFeature,function(e,n){var t=n.feature;return g({},e,c({},t,!e[t]))})]}}}),b(y=function(e){function n(){var e,r,c,s;o(this,n);for(var l=arguments.length,u=Array(l),i=0;i<l;i++)u[i]=arguments[i];return r=c=a(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(u))),c.handleRoute=function(e){var n=c.props.dispatch,o=e.target.attributes.href.value;e.preventDefault(),n(t.i(m.push)(o)),window.scrollTo(0,0)},s=r,a(c,s)}return r(n,e),E(n,[{key:"render",value:function(){var e=this.props.features,n=this.actions.toggleFeature;return u.a.createElement("div",{className:"counter-singleton-scene"},u.a.createElement("div",{className:"description"},u.a.createElement("h2",null,"Example #1 - Counter"),"Let's start with the most basic of all examples: creating a counter that we can increment and decrement with the push of a button!",u.a.createElement("br",null),u.a.createElement("br",null),"The final result should look something like this:",u.a.createElement("div",{className:"demo"},u.a.createElement(f.a,null)),"Click the buttons to make sure it works! And then let's begin!"),u.a.createElement("div",{className:"description"},u.a.createElement("h2",null,"1. Connecting @kea"),"Everything starts with importing ",u.a.createElement("code",null,"{ kea }")," into your application:",u.a.createElement(p.a,{className:"javascript"},v.import),"... and connecting it to your React component:",u.a.createElement(p.a,{className:"javascript"},v.component),u.a.createElement("button",{onClick:function(){return n("decorators")}},"What is this @kea({})?"),e.decorators?u.a.createElement("div",{className:"extra-help"},"The ",u.a.createElement("code",null,"@kea({})")," syntax is made possible by an experimental ESnext feature called ",u.a.createElement("strong",null,"decorators"),". You need to add the babel plugin ",u.a.createElement("a",{href:"https://github.com/loganfsmyth/babel-plugin-transform-decorators-legacy"},"babel-plugin-transform-decorators-legacy")," for them to work.",u.a.createElement("br",null),u.a.createElement("br",null),"In case decorators are not your cup of tea, you may just write your code like so:",u.a.createElement(p.a,{className:"javascript"},v.noDecorators)):null),u.a.createElement("div",{className:"description"},u.a.createElement("h2",null,"2. Actions, reducers, selectors, oh my!"),"Kea is built as a wrapper ",u.a.createElement("strong",null,"on top of")," ",u.a.createElement("a",{href:"http://redux.js.org/"},"redux"),", ",u.a.createElement("a",{href:"https://github.com/reactjs/reselect"},"reselect")," and ",u.a.createElement("a",{href:"https://redux-saga.js.org/"},"redux-saga"),".",u.a.createElement("br",null),u.a.createElement("br",null),"We strongly recommend you understand the basics of redux before continuing, as kea liberally borrows concepts from it.",u.a.createElement("h3",null,"2.1. Actions"),"The first thing we do is define our actions:",u.a.createElement(p.a,{className:"javascript"},v.actions),"An action in kea is simply a function that takes some arguments and returns a payload. In this case the functions take one argument (amount - the amount to increment with) and return an object with it as the only key/value.",u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement("button",{onClick:function(){return n("actionDetails")}},"What is happening in the background?"),e.actionDetails?u.a.createElement("div",{className:"extra-help"},"We're using the ES6 double arrow shortand for creating functions. What we're actually doing is this:",u.a.createElement(p.a,{className:"javascript"},v.actions2),"When wrapping kea onto your component, we also create a new object, ",u.a.createElement("code",null,"this.actions"),", which automatically binds these action creators to redux's ",u.a.createElement("code",null,"dispatch()")," and generates a unique ",u.a.createElement("code",null,"type")," for them.",u.a.createElement("br",null),u.a.createElement("br",null),"Calling ",u.a.createElement("code",null,"this.actions.increment(1)")," is the same as doing:",u.a.createElement(p.a,{className:"javascript"},v.actions3)):null,u.a.createElement("h3",null,"2.2. Reducers"),"Now that we can dispatch actions, we need to define reducers. This is where your data lives.",u.a.createElement("br",null),u.a.createElement("br",null),"Reducers have an initial ",u.a.createElement("code",null,"state")," and define actions which change this state. They may also include an optional ",u.a.createElement("code",null,"propType"),". Here's an example:",u.a.createElement(p.a,{className:"javascript"},v.reducers),"The most important thing to remember about reducers is that they must consist of ",u.a.createElement("a",{href:"http://www.nicoespeon.com/en/2015/01/pure-functions-javascript/"},"pure functions"),".",u.a.createElement("br",null),u.a.createElement("br",null),"This means that your reducer must:",u.a.createElement("br",null),u.a.createElement("ol",null,u.a.createElement("li",null,"always return the same output for the same input"),u.a.createElement("li",null,"never change the input! (e.g. when adding something to an array, create and return a new array)"),u.a.createElement("li",null,"never have any other side effects, such as network requests (we'll get to them later in this guide)")),"If you understand how reducers work ",u.a.createElement("a",{href:"http://redux.js.org/docs/basics/Reducers.html"},"in redux"),", you should feel right at home here.",u.a.createElement("br",null),u.a.createElement("br",null),u.a.createElement("button",{onClick:function(){return n("reducerDetails")}},"Tell me more!"),e.reducerDetails?u.a.createElement("div",{className:"extra-help"},"To see more complex reducers in action, look at ",u.a.createElement("a",{href:"https://github.com/mariusandra/kea-example/blob/master/app/scenes/todos/logic.js"},"the code for the todos example")," (copied below).",u.a.createElement("br",null),u.a.createElement("br",null),"We store all the todos in one object, and whenever we need to update anything for any todo, we return a completely new object.",u.a.createElement("br",null),u.a.createElement("br",null),"We use ES6 ",u.a.createElement("a",{href:"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment"},"destructuring")," and ",u.a.createElement("a",{href:"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_operator"},"object spread")," features extensively.",u.a.createElement(p.a,{className:"javascript"},v.todoReducer)):null,u.a.createElement("h3",null,"2.3. Selectors"),"The final piece of the puzzle is ",u.a.createElement("code",null,"selectors"),".",u.a.createElement("br",null),u.a.createElement("br",null),"Selectors (via ",u.a.createElement("a",{href:"https://github.com/reactjs/reselect"},"reselect"),") take as input other selectors and return some output. Selectors are cached and are only updated if their input changes. You should use them to run complex logic that is too costly to run in ",u.a.createElement("code",null,"render()")," every time.",u.a.createElement("br",null),u.a.createElement("br",null),"Adding selectors gives us this final piece of code:",u.a.createElement(p.a,{className:"javascript"},v.selectors),"The selectors are defined like this:",u.a.createElement(p.a,{className:"javascript"},v.selectors2),"Note that kea automatically creates selectors for all the reducers that you have defined, so you can use them immediately as input."),u.a.createElement("div",{className:"description"},u.a.createElement("h2",null,"Final Example"),"Adding all of this together and rendering two  ",u.a.createElement("code",null,"<Counter />"),"s gives us the following result:",u.a.createElement("div",{className:"demo"},u.a.createElement(f.a,null),u.a.createElement("br",null),u.a.createElement(f.a,null)),"You might notice that something odd is happening: Incrementing one counter automatically increments the other. Is there something we can do about this?",u.a.createElement("br",null),u.a.createElement("br",null),"Yes. That's what the next example is all about: ",u.a.createElement("a",{href:"/counter-dynamic",onClick:this.handleRoute},"Dynamic counters"),u.a.createElement("h2",null,"Full source"),u.a.createElement(p.a,{className:"javascript"},v.full),u.a.createElement("a",{href:"/counter-dynamic",onClick:this.handleRoute},"Next demo")))}}]),n}(l.Component))||y)},360:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(23),a=(t.n(o),t(227));n.default=t.i(o.createScene)({name:"counterSingleton",component:a.a})},369:function(e,n,t){"use strict";function o(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function a(e,n){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?e:n}function r(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(e,n):e.__proto__=n)}function c(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var s=t(1027),l=(t.n(s),t(4)),u=t.n(l),i=t(34);t.n(i);t.d(n,"a",function(){return h});var m,d,p=function(){function e(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(n,t,o){return t&&e(n.prototype,t),o&&e(n,o),n}}(),h=(m=t.i(i.kea)({actions:function(){return{increment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{amount:e}},decrement:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{amount:e}}}},reducers:function(e){var n,t=e.actions;e.key,e.props;return{counter:[0,l.PropTypes.number,(n={},c(n,t.increment,function(e,n){return e+n.amount}),c(n,t.decrement,function(e,n){return e-n.amount}),n)]}},selectors:function(e){var n=e.selectors;return{doubleCounter:[function(){return[n.counter]},function(e){return 2*e},l.PropTypes.number]}}}),m(d=function(e){function n(){return o(this,n),a(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return r(n,e),p(n,[{key:"render",value:function(){var e=this.props,n=e.counter,t=e.doubleCounter,o=this.actions,a=o.increment,r=o.decrement;return u.a.createElement("div",{className:"kea-counter"},"Count: ",n,u.a.createElement("br",null),"Doublecount: ",t,u.a.createElement("br",null),u.a.createElement("button",{onClick:function(){return a(1)}},"Increment"),u.a.createElement("button",{onClick:function(){return r(1)}},"Decrement"))}}]),n}(l.Component))||d)},379:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o=t(23),a=(t.n(o),t(227));n.default=t.i(o.createScene)({name:"counterSingleton",component:a.a})},576:function(e,n,t){n=e.exports=t(32)(),n.push([e.i,".kea-counter {\n  margin: 0;\n}\n",""])},577:function(e,n,t){n=e.exports=t(32)(),n.push([e.i,".counter-singleton-scene {\n  // text-align: center;\n}\n",""])},808:function(e,n){e.exports="function increment (amount) {\n  if (typeof amount === 'undefined') {\n    amount = 1\n  }\n\n  const object = { amount: amount }\n  return object\n}\n"},809:function(e,n){e.exports="store.dispatch({\n  type: 'increment counter', // autogenerated unique type\n  payload: {\n    amount: 1\n  }\n})\n"},810:function(e,n){e.exports="// counter/index.js\nimport React, { Component, PropTypes } from 'react'\nimport { kea } from 'kea'\n\n@kea({\n  actions: () => ({\n    increment: (amount = 1) => ({ amount }),\n    decrement: (amount = 1) => ({ amount })\n  }),\n  // TODO: add things here\n})\nexport default class Counter extends Component {\n  render () {\n    const { increment, decrement } = this.actions\n\n    // TODO: make these work\n    const counter = 0\n    const counter = 0\n\n    return (\n      <div className='kea-counter'>\n        Count: {counter}\n        <br />\n        Doublecount: {doubleCounter}\n        <br />\n        <button onClick={() => increment(1)}>Increment</button>\n        <button onClick={() => decrement(1)}>Decrement</button>\n      </div>\n    )\n  }\n}\n"},811:function(e,n){e.exports="import React, { Component, PropTypes } from 'react'\nimport { kea } from 'kea'\n\n@kea({\n  // TODO: code goes here\n})\nexport default class Counter extends Component {\n  render () {\n    // TODO: make these work\n    const counter = 0\n    const doubleCounter = 0\n    const increment = () => {}\n    const decrement = () => {}\n\n    return (\n      <div className='kea-counter'>\n        Count: {counter}\n        <br />\n        Doublecount: {doubleCounter}\n        <br />\n        <button onClick={() => increment(1)}>Increment</button>\n        <button onClick={() => decrement(1)}>Decrement</button>\n      </div>\n    )\n  }\n}\n"},812:function(e,n){e.exports="// counter/index.js\nimport React, { Component, PropTypes } from 'react'\nimport { kea } from 'kea'\n\n@kea({\n  actions: () => ({\n    increment: (amount = 1) => ({ amount }),\n    decrement: (amount = 1) => ({ amount })\n  }),\n\n  reducers: ({ actions }) => ({\n    counter: [0, PropTypes.number, {\n      [actions.increment]: (state, payload) => state + payload.amount,\n      [actions.decrement]: (state, payload) => state - payload.amount\n    }]\n  }),\n\n  selectors: ({ selectors }) => ({\n    doubleCounter: [\n      () => [selectors.counter],\n      (counter) => counter * 2,\n      PropTypes.number\n    ]\n  })\n})\nexport default class Counter extends Component {\n  render () {\n    const { counter, doubleCounter } = this.props\n    const { increment, decrement } = this.actions\n\n    return (\n      <div className='kea-counter'>\n        Count: {counter}\n        <br />\n        Doublecount: {doubleCounter}\n        <br />\n        <button onClick={() => increment(1)}>Increment</button>\n        <button onClick={() => decrement(1)}>Decrement</button>\n      </div>\n    )\n  }\n}\n\n// index.js\nexport default class CounterSingletonScene extends Component {\n  render () {\n    return (\n      <div>\n        <Counter />\n        <Counter />\n      </div>\n    )\n  }\n}\n"},813:function(e,n){e.exports="import { kea } from 'kea'\n"},814:function(e,n){e.exports="import React, { Component, PropTypes } from 'react'\nimport { kea } from 'kea'\n\nconst keaOptions = {\n  // ... code here\n}\n\nclass Counter extends Component {\n  render () {\n    // TODO: make these work\n    const counter = 0\n    const doubleCounter = 0\n    const increment = () => {}\n    const decrement = () => {}\n\n    return (\n      <div className='kea-counter'>\n        Count: {counter}\n        <br />\n        Doublecount: {doubleCounter}\n        <br />\n        <button onClick={() => increment(1)}>Increment</button>\n        <button onClick={() => decrement(1)}>Decrement</button>\n      </div>\n    )\n  }\n}\n\nexport default kea(keaOptions)(Component)\n"},815:function(e,n){e.exports="import React, { Component, PropTypes } from 'react'\nimport { kea } from 'kea'\n\n@kea({\n  actions: () => ({\n    increment: (amount = 1) => ({ amount }),\n    decrement: (amount = 1) => ({ amount })\n  }),\n\n  reducers: ({ actions }) => ({\n    counter: [0, PropTypes.number, {\n      [actions.increment]: (state, payload) => state + payload.amount,\n      [actions.decrement]: (state, payload) => state - payload.amount\n    }]\n  }),\n\n  // TODO: more code here?\n})\nexport default class Counter extends Component {\n  render () {\n    const { counter } = this.props\n    const { increment, decrement } = this.actions\n\n    // TODO: make this be double counter\n    const doubleCounter = 0\n\n    return (\n      <div className='kea-counter'>\n        Count: {counter}\n        <br />\n        Doublecount: {doubleCounter}\n        <br />\n        <button onClick={() => increment(1)}>Increment</button>\n        <button onClick={() => decrement(1)}>Decrement</button>\n      </div>\n    )\n  }\n}\n"},816:function(e,n){e.exports="selectors: ({ selectors }) => ({\n  // add as many as you want\n  nameOfSelector: [\n    // input selectors\n    () => [selectors.firstOtherSelector, selectors.secondOtherSelector],\n    // calculate the result\n    (firstOther, secondOther) => firstOther + secondOther,\n    // type of the result\n    PropTypes.number\n  ]\n})\n"},817:function(e,n){e.exports="import React, { Component, PropTypes } from 'react'\nimport { kea } from 'kea'\n\n@kea({\n  actions: () => ({\n    increment: (amount = 1) => ({ amount }),\n    decrement: (amount = 1) => ({ amount })\n  }),\n\n  reducers: ({ actions }) => ({\n    counter: [0, PropTypes.number, {\n      [actions.increment]: (state, payload) => state + payload.amount,\n      [actions.decrement]: (state, payload) => state - payload.amount\n    }]\n  }),\n\n  selectors: ({ selectors }) => ({\n    doubleCounter: [\n      () => [selectors.counter],\n      (counter) => counter * 2,\n      PropTypes.number\n    ]\n  })\n})\nexport default class Counter extends Component {\n  render () {\n    const { counter, doubleCounter } = this.props\n    const { increment, decrement } = this.actions\n\n    return (\n      <div className='kea-counter'>\n        Count: {counter}\n        <br />\n        Doublecount: {doubleCounter}\n        <br />\n        <button onClick={() => increment(1)}>Increment</button>\n        <button onClick={() => decrement(1)}>Decrement</button>\n      </div>\n    )\n  }\n}\n"},818:function(e,n){e.exports="\nactions: ({ constants }) => ({\n  // tab\n  showAll: true,\n  showActive: true,\n  showCompleted: true,\n\n  // todos\n  addTodo: value => ({ value }),\n  removeTodo: id => ({ id }),\n  completeTodo: id => ({ id }),\n  unCompleteTodo: id => ({ id }),\n  renameTodo: (id, value) => ({ id, value }),\n  setEditing: id => ({ id }),\n  updateEditValue: (id, value) => ({ id, value }),\n  clearEditing: id => ({ id }),\n  toggleAll: completed => ({ completed }),\n  clearCompleted: true\n}),\n\nreducers: ({ actions, constants }) => ({\n  visibilityFilter: [constants.SHOW_ALL, PropTypes.string, {\n    [actions.showAll]: () => constants.SHOW_ALL,\n    [actions.showActive]: () => constants.SHOW_ACTIVE,\n    [actions.showCompleted]: () => constants.SHOW_COMPLETED\n  }],\n\n  todos: [{}, PropTypes.object, { persist: true }, {\n    [actions.addTodo]: (state, payload) => {\n      const { value } = payload\n      const id = createUuid()\n\n      return {\n        ...state,\n        [id]: {\n          id,\n          createdAt: new Date().getTime(),\n          value,\n          completed: false,\n          editing: false\n        }\n      }\n    },\n    [actions.removeTodo]: (state, payload) => {\n      const { id } = payload\n      const { [id]: _dispose_, ...rest } = state\n      return rest\n    },\n    [actions.completeTodo]: (state, payload) => {\n      const { id } = payload\n\n      return {\n        ...state,\n        [id]: {\n          ...state[id],\n          completed: true\n        }\n      }\n    },\n    [actions.unCompleteTodo]: (state, payload) => {\n      const { id } = payload\n\n      return {\n        ...state,\n        [id]: {\n          ...state[id],\n          completed: false\n        }\n      }\n    },\n    [actions.renameTodo]: (state, payload) => {\n      const { id, value } = payload\n\n      return {\n        ...state,\n        [id]: {\n          ...state[id],\n          value\n        }\n      }\n    },\n    [actions.toggleAll]: (state, payload) => {\n      const { completed } = payload\n      let newState = {}\n      Object.values(state).forEach(todo => {\n        newState[todo.id] = {...todo, completed}\n      })\n\n      return newState\n    },\n    [actions.clearCompleted]: (state, payload) => {\n      let newState = {}\n      Object.values(state).forEach(todo => {\n        if (!todo.completed) {\n          newState[todo.id] = todo\n        }\n      })\n      return newState\n    },\n    [actions.setEditing]: (state, payload) => {\n      const { id } = payload\n\n      return {\n        ...state,\n        [id]: {\n          ...state[id],\n          editing: true,\n          editValue: state[id].value\n        }\n      }\n    },\n    [actions.updateEditValue]: (state, payload) => {\n      const { id, value } = payload\n\n      return {\n        ...state,\n        [id]: {\n          ...state[id],\n          editValue: value\n        }\n      }\n    },\n    [actions.clearEditing]: (state, payload) => {\n      const { id } = payload\n\n      return {\n        ...state,\n        [id]: {\n          ...state[id],\n          editing: false,\n          editValue: null\n        }\n      }\n    }\n  }]\n}),\n\n"}},[1043]);